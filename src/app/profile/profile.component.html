<div class="profile-container" *ngIf="!isLoading; else loadingTpl">
  <div class="profile-header">
    <div class="profile-avatar">
      <img *ngIf="profile.pictureUrl; else noPic" class="profile-picture" [src]="profile.pictureUrl" [alt]="profile.name">
    </div>
    <ng-template #noPic>
      <div class="avatar-fallback">{{ getInitials(profile.name) }}</div>
    </ng-template>
    <h1>{{ profile.name }}</h1>
    <div class="profile-stats-cards">
      <div class="stat-card">
        <div class="stat-content">
          <span class="stat-icon">ðŸ‘¥</span>
          <div>
            <span class="profile-number">{{ profile.followers }}</span>
            <span class="profile-label">Followers</span>
          </div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-content">
          <span class="stat-icon">ðŸŽ§</span>
          <div>
            <span class="profile-number">{{ profile.following }}</span>
            <span class="profile-label">Following</span>
          </div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-content">
          <span class="stat-icon">ðŸ“š</span>
          <div>
            <span class="profile-number">{{ profile.playlists }}</span>
            <span class="profile-label">Playlists</span>
          </div>
        </div>
      </div>
    </div>
    <button class="logout-button" (click)="logout()">LOGOUT</button>
  </div>

  <div class="content-container">
    <div class="top-artists">
      <div class="artists-header">
        <h2>Top Artists</h2>
        <a class="see-more-button" routerLink="/top-artists">See more</a>
      </div>
      <ul>
        <li *ngFor="let artist of topArtists | slice:0:10" (click)="artist.id && openArtistModal(artist.id)" style="cursor: pointer; text-align: left;">
          <img *ngIf="artist.imageUrl" [src]="artist.imageUrl" [alt]="artist.name" class="artist-image">
          {{ artist.name }}
        </li>
      </ul>
    </div>
    <div class="top-tracks">
      <div class="tracks-header">
        <h2>Top Tracks</h2>
        <a class="see-more-button" routerLink="/top-tracks">See more</a>
      </div>
      <ul>
        <li *ngFor="let track of topTracks | slice:0:10" (click)="track.id && openTrackModal(track.id)" style="cursor: pointer; text-align: left;">
          <div class="track-info">
            <img [src]="track.imageUrl" [alt]="track.title" class="track-image">
            <span>{{ track.title }}</span>
          </div>
          <span class="track-duration">{{ track.duration }}</span>
        </li>
      </ul>
    </div>
  </div>

  <app-track-modal [isOpen]="isModalOpen" [trackId]="selectedTrackId" (closed)="closeModal()"></app-track-modal>
  <app-artist-modal [isOpen]="isArtistModalOpen" [artistId]="selectedArtistId" (closed)="closeArtistModal()"></app-artist-modal>
</div>
<ng-template #loadingTpl>
  <div class="loading-wrapper">
    <div class="equalizer">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</ng-template>
