<div class="profile-container">
  <div class="profile-header">
    <div class="content-container">
      <h1>Top Artist</h1>
      <div class="time-period-container">
        <button class="time-period"
                [ngClass]="{'active': selectedPeriod === 'allTime'}"
                (click)="selectPeriod('allTime')">All Time</button>
        <button class="time-period"
                [ngClass]="{'active': selectedPeriod === 'last6Months'}"
                (click)="selectPeriod('last6Months')">Last 6 Months</button>
        <button class="time-period"
                [ngClass]="{'active': selectedPeriod === 'last4Weeks'}"
                (click)="selectPeriod('last4Weeks')">Last 4 Weeks</button>
      </div>
    </div>
  </div>

  <!-- Listado dinÃ¡mico de artistas -->
  <div class="artists-container">
    <div *ngIf="isLoading" class="loading-wrapper">
      <div class="equalizer">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div *ngIf="!isLoading && artists.length === 0" class="empty-state">
      No hay artistas para mostrar.
    </div>
    <ng-container *ngIf="!isLoading && artists.length > 0">
      <div class="artist-item" *ngFor="let artist of artists" (click)="openArtistModal(artist.id)">
        <div class="artist-card">
          <img *ngIf="artist.imageUrl" [src]="artist.imageUrl" [alt]="artist.name">
          <p>{{ artist.name }}</p>
        </div>
        <a class="artist-overlay" [href]="artist.spotifyUrl" target="_blank" rel="noopener noreferrer" aria-label="Ver en Spotify"></a>
        <div class="overlay-icon" aria-hidden="true"><i class="fas fa-info-circle"></i></div>
      </div>
    </ng-container>
  </div>

  <!-- Modal de artista -->
  <div class="modal-backdrop" *ngIf="isModalOpen" (click)="closeModal()"></div>
  <div class="modal" *ngIf="isModalOpen">
    <button class="modal-close" (click)="closeModal()">&times;</button>
    <div class="modal-body" *ngIf="isArtistLoading">
      <div class="modal-loading">
        <div class="equalizer">
          <span></span><span></span><span></span><span></span><span></span>
        </div>
      </div>
    </div>
    <div class="modal-body" *ngIf="!isArtistLoading && selectedArtist">
      <div class="modal-artist">
        <img *ngIf="selectedArtist?.images?.length" [src]="selectedArtist.images[0].url" [alt]="selectedArtist.name">
        <div class="info">
          <h3>{{ selectedArtist.name }}</h3>
          <p class="stats">
            <span class="stat"><i class="fas fa-users"></i>{{ selectedArtist.followers?.total | number }} seguidores</span>
            <span class="divider"></span>
            <span class="stat"><i class="fas fa-fire"></i>Popularidad {{ selectedArtist.popularity }}%</span>
          </p>
          <div class="genres" *ngIf="selectedArtist.genres?.length">
            <span *ngFor="let gender of selectedArtist.genres | slice:0:8" class="genre">{{ gender }}</span>
          </div>
          <div class="actions">
            <a class="open-spotify" [href]="selectedArtist?.external_urls?.spotify" target="_blank" rel="noopener">Abrir en Spotify</a>
            <button class="copy-link" (click)="copyArtistLink(selectedArtist?.external_urls?.spotify)"><i class="fas fa-link"></i> Copiar enlace</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
